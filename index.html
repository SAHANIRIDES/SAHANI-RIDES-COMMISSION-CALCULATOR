<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sahani Rides - Commission Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4faff;
      margin: 0;
      padding: 0;
      color: #222;
    }
    .page {
      padding: 30px;
      max-width: 600px;
      margin: auto;
      background: white;
      min-height: 100vh;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
    }
    h1, h2 {
      color: #1e4eb0;
      text-align: center;
    }
    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: bold;
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background: #1e4eb0;
      color: white;
      border: none;
      cursor: pointer;
      margin-top: 20px;
    }
    .result {
      background: #e0f4ff;
      padding: 15px;
      margin-top: 20px;
      border-radius: 6px;
      font-weight: bold;
      text-align: center;
    }
    .footer {
      text-align: center;
      margin-top: 40px;
    }
    .footer img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      object-position: top;
      background-color: white;
      padding: 5px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
      margin-bottom: 10px;
    }
    .footer strong {
      display: block;
      font-size: 16px;
      margin-top: 5px;
    }
    .social-buttons {
      text-align: center;
      margin-top: 20px;
    }
    .social-buttons a {
      display: inline-block;
      margin: 8px;
      padding: 10px 18px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      color: white;
    }
    .whatsapp { background-color: #25D366; }
    .instagram { background-color: #E1306C; }
    .facebook { background-color: #1877F2; }
    .x-btn { background-color: #000000; }
    .linkedin { background-color: #0077B5; }
    .driver-btn { background-color: #1e4eb0; margin-top: 10px; }

    /* Top oval buttons */
    .top-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }
    .top-buttons button {
      background-color: #1e4eb0;
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      min-width: 110px;
      transition: background-color 0.3s ease;
    }
    .top-buttons button:hover { background-color: #154090; }

    /* Sections */
    #driver-section, #real-rides-section, #ride-logic-section {
      margin-top: 40px;
      display: none;
    }

    /* Driver list (OVAL CARDS) */
    .driver-details-container {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .driver-oval {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 18px;
      border-radius: 999px;
      background: linear-gradient(180deg, #fbfdff, #f0f6ff);
      border: 2px solid rgba(30, 78, 176, 0.15);
      box-shadow: 0 6px 18px rgba(30, 78, 176, 0.06);
    }
    .driver-badge {
      background: #1e4eb0;
      color: #fff;
      font-weight: 800;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      flex: 0 0 auto;
    }
    .driver-lines { line-height: 1.25; }
    .driver-name { font-weight: 900; color: #1e4eb0; font-size: 14px; }
    .driver-line { font-size: 12px; color: #154090; }
    .driver-level { font-weight: 800; color: #154090; }
    .driver-time { font-size: 11px; color: #456; }

    /* Blur sensitive info */
    .blurred {
      filter: blur(5px);
      user-select: none;
      letter-spacing: 2px;
      display: inline-block;
    }

    /* Commission Chart */
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    th { background-color: #e0f0ff; }

    /* Real rides & Ride logic content */
    #real-rides-section p, #ride-logic-section p {
      text-align: center;
      font-size: 1.1rem;
      color: #1e4eb0;
    }
    #ride-logic-section figure { margin:16px 0; text-align:center; }
    #ride-logic-section img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      margin-top: 10px;
    }
    .card-copy {
      background:#f7fbff;
      border:1px solid #dfeaff;
      border-radius:12px;
      padding:14px;
      color:#1b2c48;
    }
    .card-copy h3 { margin:6px 0 10px; color:#1e4eb0; }
    .card-copy p { margin:0 0 10px; line-height:1.55; }
    .card-copy ul { margin:0 0 10px; padding-left:18px; line-height:1.55; }
    blockquote {
      margin:8px 0 0;
      padding-left:12px;
      border-left:4px solid #1e4eb0;
      color:#223;
      font-style: italic;
    }

    /* Status note */
    .status-note {
      text-align: center;
      font-size: 12px;
      color: #456;
      margin: 10px 0 0;
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Top buttons -->
    <div class="top-buttons">
      <button id="btn-driver">Driver Section</button>
      <button id="btn-real-rides">Real Rides</button>
      <button id="btn-ride-logic">Ride Logic</button>
    </div>

    <h1>Sahani Rides</h1>
    <h2>Transparent. Fair. Made for Real Drivers. <br><em>(Pilot Phase)</em></h2>

    <label for="vehicle">Select Vehicle Type:</label>
    <select id="vehicle">
      <option value="car">Sahani Cabs</option>
      <option value="auto">Sahani Auto</option>
      <option value="bike">Sahani Moto</option>
    </select>

    <label for="rides">Enter Total KM Completed:</label>
    <input type="number" id="rides" placeholder="e.g. 150 KM" />
    <button onclick="calculateCommission()">Check My Level</button>

    <div class="result" id="output"></div>

    <div id="chart" style="display: none;">
      <h2>Commission Chart (By KM)</h2>
      <table>
        <thead>
          <tr><th>Level</th><th>KM Range</th><th>Commission</th></tr>
        </thead>
        <tbody id="chartBody"></tbody>
      </table>
    </div>

    <!-- Driver Section -->
    <div id="driver-section">
      <h2 style="text-align:center; color:#1e4eb0; margin-bottom:10px;">Driver Section</h2>
      <p style="text-align:center; margin-bottom:16px;">
        Join our driver team by filling the form: 
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeri7lWcQBhOMmu93vnEYsAkcsTsXK73Q64e-QnR1_humbOeQ/viewform?usp=sharing" target="_blank" style="color:#1e4eb0; font-weight:700; text-decoration:underline;">
          Google Driver Form
        </a>
      </p>

      <div id="driverSummary" class="status-note">Loading drivers…</div>
      <div class="driver-details-container" id="driverContainer"></div>
      <div id="driverStatus" class="status-note"></div>
    </div>

    <!-- Real Rides Section -->
    <div id="real-rides-section">
      <h2 style="color:#1e4eb0; text-align:center;">Real Rides</h2>
      <p>Coming Soon! Stay tuned for updates.</p>
    </div>

    <!-- Ride Logic Section -->
    <div id="ride-logic-section">
      <h2 style="color:#1e4eb0; text-align:center;">Ride Logic</h2>

      <figure>
        <img
          id="invoice-img"
          src="https://i.postimg.cc/xTgDvv01/IMG-20250805-WA0006.jpg"
          alt="Sahani Rides – Example invoice (Passenger + Driver views)"
          loading="lazy"
          referrerpolicy="no-referrer"
        />
        <figcaption style="font-size:12px;color:#456;margin-top:8px">
          Example invoice – Passenger copy & Driver payout copy
        </figcaption>
      </figure>

      <div class="card-copy">
        <h3>The Hostel Reality</h3>
        <p>
          The fare might show <strong>₹600</strong>, but the driver ends up asking for more. It’s not always the driver’s fault — many platforms take huge commissions.
        </p>
        <p style="margin-bottom:6px;">One driver told me himself:</p>
        <blockquote>“Out of ₹600, the company keeps ₹200, I get ₹400, and ₹100 goes into petrol.”</blockquote>
        <p style="margin-top:8px;">
          The customer thinks the driver is overcharging, the driver feels misunderstood, and the company quietly takes its cut from both.
        </p>

        <h3 style="margin-top:14px;">How Sahani’s Pilot Phase Fixes It</h3>
        <p>In Sahani’s test phase, the customer and driver can openly adjust the fare together — no hidden amounts. Both instantly get a clear invoice:</p>
        <ul>
          <li><strong>Passenger’s copy</strong> shows the final fare and rewards earned.</li>
          <li><strong>Driver’s copy</strong> shows platform fee, fuel cost, and net payout.</li>
        </ul>
        <p style="margin:0;">
          If this trial works, we’ll make it faster, smoother, and roll it out to the real world — keeping trust between passengers and drivers intact from day one.
        </p>
      </div>
    </div>

    <div class="footer">
      <img src="https://i.postimg.cc/k5vB34mH/Screenshot-20250728-170952-Chrome.jpg" alt="Ansh Sahani" />
      <strong>Ansh Sahani<br />Founder – Sahani Rides</strong>

      <div class="social-buttons">
        <a href="https://wa.me/917206933309" class="whatsapp" target="_blank">Chat on WhatsApp</a>
        <a href="https://www.instagram.com/sahanirides?igsh=ZmF1eG5jZ2g2aGo0" class="instagram" target="_blank">Follow on Instagram</a>
        <a href="https://www.facebook.com/share/1H3z1WDBpn/" class="facebook" target="_blank">Like on Facebook</a>
        <a href="https://x.com/SahaniRides?t=p2YJt9w3qpCjHypb3xoYDA&s=09" class="x-btn" target="_blank">Follow on X</a>
        <a href="https://www.linkedin.com/in/ansh-sahani-575a29295?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" class="linkedin" target="_blank">Connect on LinkedIn</a>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeri7lWcQBhOMmu93vnEYsAkcsTsXK73Q64e-QnR1_humbOeQ/viewform?usp=sharing" class="driver-btn" target="_blank">Join Our Driver Team</a>
      </div>

      <!-- ABOUT US placed clearly inside footer (separate, structured box) -->
      <section id="about-us" style="margin-top:30px; padding:20px; background:#f8fbff; border-radius:10px; text-align:left;">
        <h2 style="color:#1e4eb0; text-align:center;">About Sahani Rides</h2>
        <p>
          <strong>Sahani Rides</strong> is an innovative Indian ride-hailing and transportation startup, founded in
          <strong>2025</strong> in <strong>Chennai, Tamil Nadu</strong> by <strong>Ansh Sahani</strong>, an Indian
          entrepreneur with a passion for building <em>safe, transparent, and driver-friendly</em> travel solutions.
        </p>
        <p>
          With a deep understanding of the everyday challenges faced by both drivers and passengers, Sahani Rides was
          created to solve high commission rates, lack of trust, and safety concerns that dominate the current ride-hailing market.
        </p>

        <h3 style="color:#1e4eb0;">Mission Statement</h3>
        <blockquote style="border-left:4px solid #1e4eb0; padding-left:10px; color:#333;">
          To make travel safe, affordable, and driver-friendly by reducing commissions as drivers grow, introducing transparent fare systems,
          and ensuring passengers feel secure every ride.
        </blockquote>

        <h3 style="color:#1e4eb0;">What We Do</h3>
        <ul style="line-height:1.6; margin-left:18px;">
          <li>Cab, auto, and bike ride-hailing services in one platform.</li>
          <li>Unique <strong>commission level system</strong> – the more a driver rides, the less they pay in platform fees.</li>
          <li>Passenger safety features: visible safety kits, trust-building driver introductions, and ride monitoring.</li>
          <li>Transparent pricing with instant invoices for both passengers and drivers.</li>
        </ul>

        <h3 style="color:#1e4eb0;">Key Facts</h3>
        <ul style="line-height:1.6; margin-left:18px;">
          <li><strong>Full Name:</strong> Sahani Rides</li>
          <li><strong>Founded By:</strong> Ansh Sahani</li>
          <li><strong>Year Founded:</strong> 2025</li>
          <li><strong>Industry:</strong> Transportation / Ride-hailing</li>
          <li><strong>Headquarters:</strong> Chennai, Tamil Nadu, India</li>
          <li><strong>Services:</strong> Cabs, Autos, Bikes – with driver growth incentives and passenger safety focus.</li>
          <li><strong>Website:</strong> <a href="https://www.sahanirides.com" target="_blank">www.sahanirides.com</a></li>
          <li><strong>Social Links:</strong>
            <a href="https://www.instagram.com/sahanirides" target="_blank">Instagram</a>,
            <a href="https://x.com/SahaniRides?t=p2YJt9w3qpCjHypb3xoYDA&s=09" target="_blank">X</a>,
            <a href="https://www.linkedin.com/in/ansh-sahani-575a29295?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank">LinkedIn</a>,
            <a href="https://www.facebook.com/share/1H3z1WDBpn/" target="_blank">Facebook</a>
          </li>
        </ul>

        <h3 style="color:#1e4eb0;">Why We’re Different</h3>
        <ul style="line-height:1.6; margin-left:18px;">
          <li>Drivers earn more over time with reduced commissions.</li>
          <li>Passengers enjoy complete transparency in fares and safety measures.</li>
          <li>Built on <strong>community trust</strong> before profit.</li>
        </ul>

        <h3 style="color:#1e4eb0;">Contact</h3>
        <p>
          <strong>Email:</strong> contact@sahanirides.com<br>
          <strong>City:</strong> Chennai, Tamil Nadu, India
        </p>
      </section>
      <!-- /ABOUT US -->
    </div>
  </div>

  <script>
    /* ---------------- Commission Calculator ---------------- */
    function calculateCommission() {
      const vehicle = document.getElementById("vehicle").value;
      const rides = parseInt(document.getElementById("rides").value);
      let commission = 0;
      let level = "";
      let chartData = [];

      if (vehicle === "car") {
        if (rides <= 249) { commission = 19.9; level = "Level 1";
        } else if (rides <= 499) { commission = 17.9; level = "Level 2";
        } else if (rides <= 749) { commission = 15.9; level = "Level 3";
        } else if (rides <= 999) { commission = 11.9; level = "Level 4";
        } else { commission = 7.9; level = "Level 5"; }
        chartData = [
          ["Level 1", "0–249 KM", "19.9%"],
          ["Level 2", "250–499 KM", "17.9%"],
          ["Level 3", "500–749 KM", "15.9%"],
          ["Level 4", "750–999 KM", "11.9%"],
          ["Level 5", "1000+ KM", "7.9%"],
        ];
      } else if (vehicle === "auto") {
        if (rides <= 149) { commission = 19.9; level = "Level 1";
        } else if (rides <= 349) { commission = 15.9; level = "Level 2";
        } else if (rides <= 599) { commission = 13.3; level = "Level 3";
        } else if (rides <= 849) { commission = 10.3; level = "Level 4";
        } else { commission = 8.3; level = "Level 5"; }
        chartData = [
          ["Level 1", "0–149 KM", "19.9%"],
          ["Level 2", "150–349 KM", "15.9%"],
          ["Level 3", "350–599 KM", "13.3%"],
          ["Level 4", "600–849 KM", "10.3%"],
          ["Level 5", "850+ KM", "8.3%"],
        ];
      } else if (vehicle === "bike") {
        if (rides <= 149) { commission = 19.9; level = "Level 1";
        } else if (rides <= 349) { commission = 15.9; level = "Level 2";
        } else if (rides <= 599) { commission = 13.9; level = "Level 3";
        } else if (rides <= 849) { commission = 10.9; level = "Level 4";
        } else { commission = 8.6; level = "Level 5"; }
        chartData = [
          ["Level 1", "0–149 KM", "19.9%"],
          ["Level 2", "150–349 KM", "15.9%"],
          ["Level 3", "350–599 KM", "13.9%"],
          ["Level 4", "600–849 KM", "10.9%"],
          ["Level 5", "850+ KM", "8.6%"],
        ];
      }

      document.getElementById("output").innerHTML =
        `You drive a <strong>${vehicle.toUpperCase()}</strong><br>` +
        `Your current level is <strong>${level}</strong><br>` +
        `Your commission rate is <strong>${commission}%</strong>`;

      const chart = document.getElementById("chart");
      const chartBody = document.getElementById("chartBody");
      chart.style.display = "block";
      chartBody.innerHTML = "";
      chartData.forEach((row) => {
        const tr = document.createElement("tr");
        row.forEach((cell) => {
          const td = document.createElement("td");
          td.textContent = cell;
          tr.appendChild(td);
        });
        chartBody.appendChild(tr);
      });
    }

    /* ---------------- Section Switchers ---------------- */
    function hideAllSections() {
      document.getElementById("driver-section").style.display = "none";
      document.getElementById("real-rides-section").style.display = "none";
      document.getElementById("ride-logic-section").style.display = "none";
    }
    document.getElementById("btn-driver").addEventListener("click", () => {
      hideAllSections();
      document.getElementById("driver-section").style.display = "block";
      window.scrollTo({ top: document.getElementById("driver-section").offsetTop - 30, behavior: "smooth" });
      if (!window.__driversLoadedOnce) { loadDrivers(); window.__driversLoadedOnce = true; }
    });
    document.getElementById("btn-real-rides").addEventListener("click", () => {
      hideAllSections();
      document.getElementById("real-rides-section").style.display = "block";
      window.scrollTo({ top: document.getElementById("real-rides-section").offsetTop - 30, behavior: "smooth" });
    });
    document.getElementById("btn-ride-logic").addEventListener("click", () => {
      hideAllSections();
      document.getElementById("ride-logic-section").style.display = "block";
      window.scrollTo({ top: document.getElementById("ride-logic-section").offsetTop - 30, behavior: "smooth" });
    });

    /* ---------------- LIVE DRIVERS (from CSV) ---------------- */
    const SHEET_CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vTYbWyqmpkGVg098hhriuQ74toMrmD6G4pJ62ciB1GAVy1ltsZSrCkrK8UYhcS1TETotnN_FgCO8gNV/pub?gid=2020961533&single=true&output=csv";

    const REFRESH_MS = 60000;

    const $ = (sel) => document.querySelector(sel);
    const clean = (s) => (s || "").trim().replace(/^"|"$/g, "");
    function splitCsvRow(row) {
      const out = []; let cur = ""; let q = false;
      for (let i = 0; i < row.length; i++) {
        const c = row[i];
        if (c === '"') { q = !q; continue; }
        if (c === "," && !q) { out.push(cur); cur = ""; continue; }
        cur += c;
      }
      out.push(cur);
      return out;
    }
    function maskMiddle(v) {
      v = (v || "").trim(); if (!v) return "";
      const len = v.length; if (len <= 4) return "*".repeat(len);
      const start = Math.min(3, Math.max(1, Math.floor(len * 0.25)));
      const end = Math.min(2, Math.floor(len * 0.2));
      return v.slice(0, start) + "*".repeat(Math.max(1, len - (start + end))) + v.slice(len - end);
    }
    function esc(s){ return (s||"").toString().replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    async function fetchCsv() {
      const statusEl = $("#driverStatus");
      statusEl.textContent = "Loading…";
      const t0 = performance.now();
      const res = await fetch(SHEET_CSV_URL, { cache: "no-store" });
      if (!res.ok) throw new Error("Fetch failed — check CSV publish link.");
      const txt = await res.text();
      const rows = txt.trim().split(/\r?\n/);
      if (rows.length <= 1) throw new Error("CSV has no data rows.");

      const header = splitCsvRow(rows[0]).map(h => h.trim().toLowerCase());
      const idx = {
        time:   header.findIndex(h => /time|timestamp/.test(h)),
        name:   header.findIndex(h => /name|full\s*name/.test(h)),
        phone:  header.findIndex(h => /phone|mobile|contact/.test(h)),
        vehicle:header.findIndex(h => /vehicle|reg|registration|number|plate|vehicle\s*no/.test(h)),
        level:  header.findIndex(h => /level|tier|rank/.test(h)),
      };

      const data = [];
      for (let i = 1; i < rows.length; i++) {
        const cols = splitCsvRow(rows[i]).map(clean);
        data.push({
          time:    idx.time   > -1 ? cols[idx.time]    : "",
          name:    idx.name   > -1 ? cols[idx.name]    : "",
          phone:   idx.phone  > -1 ? cols[idx.phone]   : "",
          vehicle: idx.vehicle> -1 ? cols[idx.vehicle] : "",
          level:   idx.level  > -1 ? cols[idx.level]   : ""
        });
      }

      if (idx.time > -1) {
        data.sort((a, b) => (new Date(b.time)) - (new Date(a.time)));
      }

      renderDrivers(data);

      const t1 = performance.now();
      statusEl.textContent = `Loaded ${data.length} drivers in ${(t1 - t0 | 0)} ms. Auto-refresh ${REFRESH_MS/1000}s.`;
    }

    function renderDrivers(data) {
      const container = $("#driverContainer");
      const summary = $("#driverSummary");
      container.innerHTML = "";
      summary.textContent = `Total drivers: ${data.length}`;

      data.forEach((d, i) => {
        const box = document.createElement("div");
        box.className = "driver-oval";
        box.innerHTML = `
          <div class="driver-badge">Driver ${i + 1}</div>
          <div class="driver-lines">
            <div class="driver-name">${esc(d.name || "—")} <span class="driver-level">• ${esc(d.level || "Level ?")}</span></div>
            <div class="driver-line">Phone: <span class="blurred">${esc(maskMiddle(d.phone))}</span></div>
            <div class="driver-line">Vehicle: <span class="blurred">${esc(maskMiddle(d.vehicle))}</span></div>
            <div class="driver-time">${esc(d.time || "")}</div>
          </div>
        `;
        container.appendChild(box);
      });
    }

    async function loadDrivers(){
      try { await fetchCsv(); }
      catch (e) { $("#driverStatus").textContent = e.message || "Failed to load drivers."; }
    }

    setInterval(() => {
      const visible = document.getElementById("driver-section").style.display !== "none";
      if (visible) loadDrivers();
    }, REFRESH_MS);
  </script>
</body>
  </html>
